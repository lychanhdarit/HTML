var V=V||{};V.bootstrap=V.bootstrap||{},V.bootstrap.modalHistory={initialize:function(){V.bootstrap.modalHistory.findModals()},isIE9:function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return 9===parseInt(a.substring(b+5,a.indexOf(".",b)),10)},findModals:function(){$(".modal").each(function(a,b){V.bootstrap.modalHistory.onOpenModal(b),V.bootstrap.modalHistory.onCloseModal(b)})},onOpenModal:function(a){var b=$(a);b.on("show.bs.modal",function(){window.location.hash=b.prop("id"),window.onhashchange=function(){location.hash||b.modal("hide")}})},onCloseModal:function(a){var b=$(a);b.on("hidden.bs.modal",function(){V.bootstrap.modalHistory.isIE9()?window.location.hash="":history.pushState("",document.title,window.location.pathname)})}},V.stickyNav={initialize:function(){$(".sticky-nav").on("affixed-top.bs.affix",function(){$(this).css("visibility","visible")})}},V.chat={initialize:function(){var a=this;if(V.grammar.ChatServer)for(var b=document.querySelectorAll('[href="#chat"]'),c=0;c<b.length;c++)b[c].addEventListener("click",function(b){return b.preventDefault(),a.popUp("https://"+V.grammar.ChatServer,500,750)})},popUp:function(a,b,c){var d=new Date;b=b||900,c=c||800,V.bootstrap.modalHistory.isIE9()?window.open(a,"","toolbar=no,scrollbars=yes,location=no,statusbar=no,menubar=no,resizable=no,width="+b+",height="+c):window.open(a,d.toString(),"toolbar=no,scrollbars=yes,location=no,statusbar=no,menubar=no,resizable=no,width="+b+",height="+c)}},V.errors={initialize:function(a){this.buildErrorWrapper(),this.errorFilter(a)},buildErrorWrapper:function(){var a='<div class="sticky-error-wrapper"><i class="fa fa-times close"></i><div class="alert alert-danger"><span></span><ul></ul></div></div>';$("body").prepend(a)},displayServerErrors:function(a){var b=$(".sticky-error-wrapper"),c=this;a.forEach(function(a,d){c.displaySingleError(a.message,b)})},errorFilter:function(a){var b=$(".sticky-error-wrapper");if("string"==typeof a)this.displaySingleError(a,b);else if(a)for(var c in a){var d=a[c],e=d?Object.keys(d).length:0;"username"!==c&&e>0&&(e>1?this.displayMultipleErrors(d,b):this.displaySingleError(d,b))}this.checkForBillingErrors(a)},displaySingleError:function(a,b){var c=b.find(".alert span");if(b.hasClass("open"))"object"==typeof a&&this.displayMultipleErrors(a,b);else{if(c.length<=0&&(b.find(".alert").html("<span></span>"),c=b.find(".alert span")),"object"==typeof a)for(var d in a)a=a[d];c.empty().append(a),this.setCloseTrigger(b),b.addClass("open"),window.setTimeout(function(){V.errors.closeAlert(b)},5e3)}},displayMultipleErrors:function(a,b){var c,d,e,c=b.find("ul");b.find(".alert span").text("We found the following errors:");for(var f in a)e=a[f],d="<li>"+e+"</li>",c.append(d);b.addClass("open"),this.watchInputs(b),this.setCloseTrigger(b)},setCloseTrigger:function(a){var b=a.find(".close");b.on("click",function(){V.errors.closeAlert(a)})},closeAlert:function(a){a.removeClass("open"),window.setTimeout(function(){a.find(".alert").empty()},250)},watchInputs:function(a){var b=$(".has-error");b.on("keyup focus","input, textarea, select",function(){var b=$(this).closest(".form-group");b.removeClass("has-error text-danger"),V.errors.closeAlert(a)})},checkForBillingErrors:function(a){a.payment_info&&dataLayer.push({pageType:"flow",flow:"domain-reg",step:"billing-info-error"})}},V.printPage={initialize:function(){var a=$('a[href="#print"]');a.on("click",function(a){a.preventDefault(),window.print()})}},$(document).ready(function(){V.bootstrap.modalHistory.initialize(),V.stickyNav.initialize(),V.chat.initialize(),V.printPage.initialize()});
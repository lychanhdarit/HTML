!function(t){function e(e,i,n,s){var o=e.text().split(i),r="";o.length&&(t(o).each(function(t,e){r+='<span class="'+n+(t+1)+'">'+e+"</span>"+s}),e.empty().append(r))}var i={init:function(){return this.each(function(){e(t(this),"","char","")})},words:function(){return this.each(function(){e(t(this)," ","word"," ")})},lines:function(){return this.each(function(){var i="eefec303079ad17405c889e092e105b0";e(t(this).children("br").replaceWith(i).end(),i,"line","")})}};t.fn.lettering=function(e){return e&&i[e]?i[e].apply(this,[].slice.call(arguments,1)):"letters"!==e&&e?(t.error("Method "+e+" does not exist on jQuery.lettering"),this):i.init.apply(this,[].slice.call(arguments,0))}}(jQuery),function(t){t.easing.jswing=t.easing.swing,t.extend(t.easing,{def:"easeOutQuad",swing:function(e,i,n,s,o){return t.easing[t.easing.def](e,i,n,s,o)},easeInQuad:function(t,e,i,n,s){return n*(e/=s)*e+i},easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i},easeInOutQuad:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,s){return n*(e/=s)*e*e+i},easeOutCubic:function(t,e,i,n,s){return n*((e=e/s-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,s){return n*(e/=s)*e*e*e+i},easeOutQuart:function(t,e,i,n,s){return-n*((e=e/s-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,s){return n*(e/=s)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,s){return n*((e=e/s-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,s){return-n*Math.cos(e/s*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,s){return n*Math.sin(e/s*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,s){return-n/2*(Math.cos(Math.PI*e/s)-1)+i},easeInExpo:function(t,e,i,n,s){return 0==e?i:n*Math.pow(2,10*(e/s-1))+i},easeOutExpo:function(t,e,i,n,s){return e==s?i+n:n*(-Math.pow(2,-10*e/s)+1)+i},easeInOutExpo:function(t,e,i,n,s){return 0==e?i:e==s?i+n:(e/=s/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,n,s){return-n*(Math.sqrt(1-(e/=s)*e)-1)+i},easeOutCirc:function(t,e,i,n,s){return n*Math.sqrt(1-(e=e/s-1)*e)+i},easeInOutCirc:function(t,e,i,n,s){return(e/=s/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,s){var o=1.70158,r=0,a=n;if(0==e)return i;if(1==(e/=s))return i+n;if(r||(r=.3*s),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r))+i},easeOutElastic:function(t,e,i,n,s){var o=1.70158,r=0,a=n;if(0==e)return i;if(1==(e/=s))return i+n;if(r||(r=.3*s),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*e)*Math.sin((e*s-o)*(2*Math.PI)/r)+n+i},easeInOutElastic:function(t,e,i,n,s){var o=1.70158,r=0,a=n;if(0==e)return i;if(2==(e/=s/2))return i+n;if(r||(r=s*(.3*1.5)),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return 1>e?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r))+i:a*Math.pow(2,-10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r)*.5+n+i},easeInBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),n*(e/=s)*e*((o+1)*e-o)+i},easeOutBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),n*((e=e/s-1)*e*((o+1)*e+o)+1)+i},easeInOutBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),(e/=s/2)<1?n/2*(e*e*(((o*=1.525)+1)*e-o))+i:n/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+i},easeInBounce:function(e,i,n,s,o){return s-t.easing.easeOutBounce(e,o-i,0,s,o)+n},easeOutBounce:function(t,e,i,n,s){return(e/=s)<1/2.75?n*(7.5625*e*e)+i:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(e,i,n,s,o){return o/2>i?.5*t.easing.easeInBounce(e,2*i,0,s,o)+n:.5*t.easing.easeOutBounce(e,2*i-o,0,s,o)+.5*s+n}})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var r=e||window.event,a=h.call(arguments,1),c=0,u=0,l=0,f=0;if(e=t.event.fix(r),e.type="mousewheel","detail"in r&&(l=-1*r.detail),"wheelDelta"in r&&(l=r.wheelDelta),"wheelDeltaY"in r&&(l=r.wheelDeltaY),"wheelDeltaX"in r&&(u=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(u=-1*l,l=0),c=0===l?u:l,"deltaY"in r&&(l=-1*r.deltaY,c=l),"deltaX"in r&&(u=r.deltaX,0===l&&(c=-1*u)),0!==l||0!==u){if(1===r.deltaMode){var p=t.data(this,"mousewheel-line-height");c*=p,l*=p,u*=p}else if(2===r.deltaMode){var d=t.data(this,"mousewheel-page-height");c*=d,l*=d,u*=d}return f=Math.max(Math.abs(l),Math.abs(u)),(!o||o>f)&&(o=f,n(r,f)&&(o/=40)),n(r,f)&&(c/=40,u/=40,l/=40),c=Math[c>=1?"floor":"ceil"](c/o),u=Math[u>=1?"floor":"ceil"](u/o),l=Math[l>=1?"floor":"ceil"](l/o),e.deltaX=u,e.deltaY=l,e.deltaFactor=o,e.deltaMode=0,a.unshift(e,c,u,l),s&&clearTimeout(s),s=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){o=null}function n(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var s,o,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(t.event.fixHooks)for(var c=r.length;c;)t.event.fixHooks[r[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=a.length;t;)this.removeEventListener(a[--t],e,!1);else this.onmousewheel=null},getLineHeight:function(e){return parseInt(t(e)["offsetParent"in t.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){function e(t){var e=t.data("_ARS_data");return e||(e={rotateUnits:"deg",scale:1,rotate:0},t.data("_ARS_data",e)),e}function i(t,e){t.css("transform","rotate("+e.rotate+e.rotateUnits+") scale("+e.scale+","+e.scale+")")}t.fn.rotate=function(n){var s,o=t(this),r=e(o);return"undefined"==typeof n?r.rotate+r.rotateUnits:(s=n.toString().match(/^(-?\d+(\.\d+)?)(.+)?$/),s&&(s[3]&&(r.rotateUnits=s[3]),r.rotate=s[1],i(o,r)),this)},t.fn.scale=function(n){var s=t(this),o=e(s);return"undefined"==typeof n?o.scale:(o.scale=n,i(s,o),this)};var n=t.fx.prototype.cur;t.fx.prototype.cur=function(){return"rotate"==this.prop?parseFloat(t(this.elem).rotate()):"scale"==this.prop?parseFloat(t(this.elem).scale()):n.apply(this,arguments)},t.fx.step.rotate=function(i){var n=e(t(i.elem));t(i.elem).rotate(i.now+n.rotateUnits)},t.fx.step.scale=function(e){t(e.elem).scale(e.now)};var s=t.fn.animate;t.fn.animate=function(i){if("undefined"!=typeof i.rotate){var n,o,r=i.rotate.toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);r&&r[5]&&(n=t(this),o=e(n),o.rotateUnits=r[5]),i.rotate=r[1]}return s.apply(this,arguments)}}(jQuery),function(t){"use strict";var e="draptouch-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()),t.support=t.support||{},t.extend(t.support,{touch:"ontouchend"in document});var i=function(){return!1},n=function(e,i){return this.settings=i,this.el=e,this.$el=t(e),this._initElements(),this};n.DATA_KEY="draptouch",n.DEFAULTS={cursor:"",decelerate:!0,triggerHardware:!1,threshold:0,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"draptouch-moving-up",down:"draptouch-moving-down",left:"draptouch-moving-left",right:"draptouch-moving-right"},deceleratingClass:{up:"draptouch-decelerating-up",down:"draptouch-decelerating-down",left:"draptouch-decelerating-left",right:"draptouch-decelerating-right"}},n.prototype.start=function(e){this.settings=t.extend(this.settings,e),this.velocity=e.velocity||this.velocity,this.velocityY=e.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},n.prototype.end=function(){this.settings.decelerate=!0},n.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,t.isFunction(this.settings.stopped)&&this.settings.stopped.call(this)},n.prototype.detach=function(){this._detachListeners(),this.$el.removeClass(e).css("cursor","")},n.prototype.attach=function(){this.$el.hasClass(e)||(this._attachListeners(this.$el),this.$el.addClass(e).css("cursor",this.settings.cursor))},n.prototype._initElements=function(){this.$el.addClass(e),t.extend(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0,t(document).mouseup(t.proxy(this._resetMouse,this)).click(t.proxy(this._resetMouse,this)),this._initEvents(),this.$el.css("cursor",this.settings.cursor),this.settings.triggerHardware&&this.$el.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})},n.prototype._initEvents=function(){var e=this;this.settings.events={touchStart:function(t){var i;e._useTarget(t.target,t)&&(i=t.originalEvent.touches[0],e.threshold=e._threshold(t.target,t),e._start(i.clientX,i.clientY),t.stopPropagation())},touchMove:function(t){var i;e.mouseDown&&(i=t.originalEvent.touches[0],e._inputmove(i.clientX,i.clientY),t.preventDefault&&t.preventDefault())},inputDown:function(t){e._useTarget(t.target,t)&&(e.threshold=e._threshold(t.target,t),e._start(t.clientX,t.clientY),e.elementFocused=t.target,"IMG"===t.target.nodeName&&t.preventDefault(),t.stopPropagation())},inputEnd:function(t){e._useTarget(t.target,t)&&(e._end(),e.elementFocused=null,t.preventDefault&&t.preventDefault())},inputMove:function(t){e.mouseDown&&(e._inputmove(t.clientX,t.clientY),t.preventDefault&&t.preventDefault())},scroll:function(i){t.isFunction(e.settings.moved)&&e.settings.moved.call(e,e.settings),i.preventDefault&&i.preventDefault()},inputClick:function(t){return Math.abs(e.velocity)>0?(t.preventDefault(),!1):void 0},dragStart:function(t){return e._useTarget(t.target,t)&&e.elementFocused?!1:void 0}},this._attachListeners(this.$el,this.settings)},n.prototype._inputmove=function(e,i){var n=this.$el;this.el;if((!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){var s=e-this.xpos,o=i-this.ypos;if(this.threshold>0){var r=Math.sqrt(s*s+o*o);if(this.threshold>r)return;this.threshold=0}this.elementFocused&&(t(this.elementFocused).blur(),this.elementFocused=null,n.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var a=this.scrollLeft(),h=this.scrollTop();this.scrollLeft(this.settings.x?a-s:a),this.scrollTop(this.settings.y?h-o:h),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=e,this.ypos=i,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),t.isFunction(this.settings.moved)&&this.settings.moved.call(this,this.settings)}},n.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity)},n.prototype._end=function(){this.xpos&&this.prevXPos&&this.settings.decelerate===!1&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},n.prototype._useTarget=function(e,i){return t.isFunction(this.settings.filterTarget)?this.settings.filterTarget.call(this,e,i)!==!1:!0},n.prototype._threshold=function(e,i){return t.isFunction(this.settings.threshold)?this.settings.threshold.call(this,e,i):this.settings.threshold},n.prototype._start=function(t,e){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=t,this.ypos=e},n.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},n.prototype._decelerateVelocity=function(t,e){return 0===Math.floor(Math.abs(t))?0:t*e},n.prototype._capVelocity=function(t,e){var i=t;return t>0?t>e&&(i=e):0-e>t&&(i=0-e),i},n.prototype._setMoveClasses=function(t){var e=this.settings,i=this.$el;i.removeClass(e.movingClass.up).removeClass(e.movingClass.down).removeClass(e.movingClass.left).removeClass(e.movingClass.right).removeClass(e.deceleratingClass.up).removeClass(e.deceleratingClass.down).removeClass(e.deceleratingClass.left).removeClass(e.deceleratingClass.right),this.velocity>0&&i.addClass(t.right),this.velocity<0&&i.addClass(t.left),this.velocityY>0&&i.addClass(t.down),this.velocityY<0&&i.addClass(t.up)},n.prototype._move=function(){var e=(this.$el,this.el),i=this,n=i.settings;n.x&&e.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=n.decelerate?i._decelerateVelocity(this.velocity,n.slowdown):this.velocity)):this.velocity=0,n.y&&e.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=n.decelerate?i._decelerateVelocity(this.velocityY,n.slowdown):this.velocityY)):this.velocityY=0,i._setMoveClasses(n.deceleratingClass),t.isFunction(n.moved)&&n.moved.call(this,n),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,window.requestAnimationFrame(function(){i.moving=!1,i._move()})):i.stop()},n.prototype._getScroller=function(){var e=this.$el;return(this.$el.is("body")||this.$el.is("html"))&&(e=t(window)),e},n.prototype.scrollLeft=function(t){var e=this._getScroller();return"number"!=typeof t?e.scrollLeft():(e.scrollLeft(t),void(this.settings.scrollLeft=t))},n.prototype.scrollTop=function(t){var e=this._getScroller();return"number"!=typeof t?e.scrollTop():(e.scrollTop(t),void(this.settings.scrollTop=t))},n.prototype._attachListeners=function(){var e=this.$el,n=this.settings;t.support.touch&&e.bind("touchstart",n.events.touchStart).bind("touchend",n.events.inputEnd).bind("touchmove",n.events.touchMove),e.mousedown(n.events.inputDown).mouseup(n.events.inputEnd).mousemove(n.events.inputMove),e.click(n.events.inputClick).scroll(n.events.scroll).bind("selectstart",i).bind("dragstart",n.events.dragStart)},n.prototype._detachListeners=function(){var e=this.$el,n=this.settings;t.support.touch&&e.unbind("touchstart",n.events.touchStart).unbind("touchend",n.events.inputEnd).unbind("touchmove",n.events.touchMove),e.unbind("mousedown",n.events.inputDown).unbind("mouseup",n.events.inputEnd).unbind("mousemove",n.events.inputMove),e.unbind("click",n.events.inputClick).unbind("scroll",n.events.scroll).unbind("selectstart",i).unbind("dragstart",n.events.dragStart)},t.DrapTouch=n,t.fn.draptouch=function(e,i){return this.each(function(){var s=t(this),o=s.data(n.DATA_KEY),r=t.extend({},n.DEFAULTS,s.data(),"object"==typeof e&&e);o||s.data(n.DATA_KEY,o=new n(this,r)),"string"==typeof e&&o[e](i)})}}(window.jQuery||window.Zepto),function(){"use strict";var t=function(t){var e=function(e,i){this.el=t(e),this.zoomFactor=1,this.lastScale=1,this.offset={x:0,y:0},this.options=t.extend({},this.defaults,i),this.setupMarkup(),this.bindEvents(),this.update(),this.enable()},i=function(t,e){return t+e},n=function(t,e){return t>e-.01&&e+.01>t};e.prototype={defaults:{tapZoomFactor:2,zoomOutFactor:1.3,animationDuration:300,animationInterval:5,maxZoom:10,minZoom:.2,lockDragAxis:!1,use2d:!0,zoomStartEventName:"pz_zoomstart",zoomEndEventName:"pz_zoomend",dragStartEventName:"pz_dragstart",dragEndEventName:"pz_dragend",doubleTapEventName:"pz_doubletap"},handleDragStart:function(t){this.el.trigger(this.options.dragStartEventName),this.stopAnimation(),this.lastDragPosition=!1,this.hasInteraction=!0,this.handleDrag(t)},handleDrag:function(t){if(this.zoomFactor>1){var e=this.getTouches(t)[0];this.drag(e,this.lastDragPosition),this.offset=this.sanitizeOffset(this.offset),this.lastDragPosition=e}},handleDragEnd:function(){this.el.trigger(this.options.dragEndEventName),this.end()},handleZoomStart:function(){this.el.trigger(this.options.zoomStartEventName),this.stopAnimation(),this.lastScale=1,this.nthZoom=0,this.lastZoomCenter=!1,this.hasInteraction=!0},handleZoom:function(t,e){var i=this.getTouchCenter(this.getTouches(t)),n=e/this.lastScale;this.lastScale=e,this.nthZoom+=1,this.nthZoom>3&&(this.scale(n,i),this.drag(i,this.lastZoomCenter)),this.lastZoomCenter=i},handleZoomEnd:function(){this.el.trigger(this.options.zoomEndEventName),this.end()},handleDoubleTap:function(t){var e=this.getTouches(t)[0],i=this.zoomFactor>1?1:this.options.tapZoomFactor,n=this.zoomFactor,s=function(t){this.scaleTo(n+t*(i-n),e)}.bind(this);this.hasInteraction||(n>i&&(e=this.getCurrentZoomCenter()),this.animate(this.options.animationDuration,this.options.animationInterval,s,this.swing),this.el.trigger(this.options.doubleTapEventName))},sanitizeOffset:function(t){var e=(this.zoomFactor-1)*this.getContainerX(),i=(this.zoomFactor-1)*this.getContainerY(),n=Math.max(e,0),s=Math.max(i,0),o=Math.min(e,0),r=Math.min(i,0);return{x:Math.min(Math.max(t.x,o),n),y:Math.min(Math.max(t.y,r),s)}},scaleTo:function(t,e){this.scale(t/this.zoomFactor,e)},scale:function(t,e){t=this.scaleZoomFactor(t),this.addOffset({x:(t-1)*(e.x+this.offset.x),y:(t-1)*(e.y+this.offset.y)})},scaleZoomFactor:function(t){var e=this.zoomFactor;return this.zoomFactor*=t,this.zoomFactor=Math.min(this.options.maxZoom,Math.max(this.zoomFactor,this.options.minZoom)),this.zoomFactor/e},drag:function(t,e){e&&(this.options.lockDragAxis?Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?this.addOffset({x:-(t.x-e.x),y:0}):this.addOffset({y:-(t.y-e.y),x:0}):this.addOffset({y:-(t.y-e.y),x:-(t.x-e.x)}))},getTouchCenter:function(t){return this.getVectorAvg(t)},getVectorAvg:function(t){return{x:t.map(function(t){return t.x}).reduce(i)/t.length,y:t.map(function(t){return t.y}).reduce(i)/t.length}},addOffset:function(t){this.offset={x:this.offset.x+t.x,y:this.offset.y+t.y}},sanitize:function(){this.zoomFactor<this.options.zoomOutFactor?this.zoomOutAnimation():this.isInsaneOffset(this.offset)&&this.sanitizeOffsetAnimation()},isInsaneOffset:function(t){var e=this.sanitizeOffset(t);return e.x!==t.x||e.y!==t.y},sanitizeOffsetAnimation:function(){var t=this.sanitizeOffset(this.offset),e={x:this.offset.x,y:this.offset.y},i=function(i){this.offset.x=e.x+i*(t.x-e.x),this.offset.y=e.y+i*(t.y-e.y),this.update()}.bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,i,this.swing)},zoomOutAnimation:function(){var t=this.zoomFactor,e=1,i=this.getCurrentZoomCenter(),n=function(n){this.scaleTo(t+n*(e-t),i)}.bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,n,this.swing)},updateAspectRatio:function(){this.setContainerY(this.getContainerX()/this.getAspectRatio())},getInitialZoomFactor:function(){return this.container[0].offsetWidth/this.el[0].offsetWidth},getAspectRatio:function(){return this.el[0].offsetWidth/this.el[0].offsetHeight},getCurrentZoomCenter:function(){var t=this.container[0].offsetWidth*this.zoomFactor,e=this.offset.x,i=t-e-this.container[0].offsetWidth,n=e/i,s=n*this.container[0].offsetWidth/(n+1),o=this.container[0].offsetHeight*this.zoomFactor,r=this.offset.y,a=o-r-this.container[0].offsetHeight,h=r/a,c=h*this.container[0].offsetHeight/(h+1);return 0===i&&(s=this.container[0].offsetWidth),0===a&&(c=this.container[0].offsetHeight),{x:s,y:c}},canDrag:function(){return!n(this.zoomFactor,1)},getTouches:function(t){var e=this.container.offset();return Array.prototype.slice.call(t.touches).map(function(t){return{x:t.pageX-e.left,y:t.pageY-e.top}})},animate:function(t,e,i,n,s){var o=(new Date).getTime(),r=function(){if(this.inAnimation){var a=(new Date).getTime()-o,h=a/t;a>=t?(i(1),s&&s(),this.update(),this.stopAnimation(),this.update()):(n&&(h=n(h)),i(h),this.update(),setTimeout(r,e))}}.bind(this);this.inAnimation=!0,r()},stopAnimation:function(){this.inAnimation=!1},swing:function(t){return-Math.cos(t*Math.PI)/2+.5},getContainerX:function(){return this.container[0].offsetWidth},getContainerY:function(){return this.container[0].offsetHeight},setContainerY:function(){var t=window.innerHeight;return this.container.height(t)},setupMarkup:function(){this.container=t('<div class="pinch-zoom-container"></div>'),this.el.before(this.container),this.container.append(this.el),this.container.css({position:"relative",height:window.innerHeight,width:"100%"}),this.el.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%",position:"absolute",height:window.innerHeight})},end:function(){this.hasInteraction=!1,this.sanitize(),this.update()},bindEvents:function(){s(this.container.get(0),this),t(window).on("resize",this.update.bind(this)),t(this.el).find("img").on("load",this.update.bind(this))},update:function(){this.updatePlaned||(this.updatePlaned=!0,setTimeout(function(){this.updatePlaned=!1,this.updateAspectRatio();var t=this.getInitialZoomFactor()*this.zoomFactor,e=-this.offset.x/t,i=-this.offset.y/t,n="scale3d("+t+", "+t+",1) translate3d("+e+"px,"+i+"px,0px)",s="scale("+t+", "+t+") translate("+e+"px,"+i+"px)",o=function(){this.clone&&(this.clone.remove(),delete this.clone)}.bind(this);!this.options.use2d||this.hasInteraction||this.inAnimation?(this.is3d=!0,o(),this.el.css({"-webkit-transform":n,"-o-transform":s,"-ms-transform":s,"-moz-transform":s,transform:n})):(this.is3d&&(this.clone=this.el.clone(),this.clone.css("pointer-events","none"),this.clone.appendTo(this.container),setTimeout(o,200)),this.el.css({"-webkit-transform":s,"-o-transform":s,"-ms-transform":s,"-moz-transform":s,transform:s}),this.is3d=!1)}.bind(this),0))},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}};var s=function(t,e){var i=null,n=0,s=null,o=null,r=function(t,n){if(i!==t){if(i&&!t)switch(i){case"zoom":e.handleZoomEnd(n);break;case"drag":e.handleDragEnd(n)}switch(t){case"zoom":e.handleZoomStart(n);break;case"drag":e.handleDragStart(n)}}i=t},a=function(t){2===n?r("zoom"):1===n&&e.canDrag()?r("drag",t):r(null,t)},h=function(t){return Array.prototype.slice.call(t).map(function(t){return{x:t.pageX,y:t.pageY}})},c=function(t,e){var i,n;return i=t.x-e.x,n=t.y-e.y,Math.sqrt(i*i+n*n)},u=function(t,e){var i=c(t[0],t[1]),n=c(e[0],e[1]);return n/i},l=function(t){t.stopPropagation(),t.preventDefault()},f=function(t){var o=(new Date).getTime();if(n>1&&(s=null),300>o-s)switch(l(t),e.handleDoubleTap(t),i){case"zoom":e.handleZoomEnd(t);break;case"drag":e.handleDragEnd(t)}1===n&&(s=o)},p=!0;t.addEventListener("touchstart",function(t){e.enabled&&(p=!0,n=t.touches.length,f(t))}),t.addEventListener("touchmove",function(t){if(e.enabled){if(p)a(t),i&&l(t),o=h(t.touches);else{switch(i){case"zoom":e.handleZoom(t,u(o,h(t.touches)));break;case"drag":e.handleDrag(t)}i&&(l(t),e.update())}p=!1}}),t.addEventListener("touchend",function(t){e.enabled&&(n=t.touches.length,a(t))})};return e};"undefined"!=typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):(window.Pic=window.Pic||{},window.Pic.PinchZoom=t(window.$))}.call(this),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(i){return e(t,i)}):"object"==typeof exports?e(t,require("jquery")):e(t,t.jQuery)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(t,e){for(var i=t.length;--i;)if(+t[i]!==+e[i])return!1;return!0}function n(t){var i={range:!0,animate:!0};return"boolean"==typeof t?i.animate=t:e.extend(i,t),i}function s(t,i,n,s,o,r,a,h,c){"array"===e.type(t)?this.elements=[+t[0],+t[2],+t[4],+t[1],+t[3],+t[5],0,0,1]:this.elements=[t,i,n,s,o,r,a||0,h||0,c||1]}function o(t,e,i){this.elements=[t,e,i]}function r(t,i){if(!(this instanceof r))return new r(t,i);1!==t.nodeType&&e.error("Panzoom called on non-Element node"),e.contains(l,t)||e.error("Panzoom element must be attached to the document");var n=e.data(t,f);if(n)return n;this.options=i=e.extend({},r.defaults,i),this.elem=t;var s=this.$elem=e(t);this.$set=i.$set&&i.$set.length?i.$set:s,this.$doc=e(t.ownerDocument||l),this.$parent=s.parent(),this.isSVG=g.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=!this.isSVG&&e.cssProps.transform.replace(v,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var o=e(),a=this;e.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(t,e){a[e]=i[e]||o}),this.enable(),e.data(t,f,this)}var a="over out down up move enter leave cancel".split(" "),h=e.extend({},e.event.mouseHooks),c={};if(t.PointerEvent)e.each(a,function(t,i){e.event.fixHooks[c[i]="pointer"+i]=h});else{var u=h.props;h.props=u.concat(["touches","changedTouches","targetTouches","altKey","ctrlKey","metaKey","shiftKey"]),h.filter=function(t,e){var i,n=u.length;if(!e.pageX&&e.touches&&(i=e.touches[0]))for(;n--;)t[u[n]]=i[u[n]];return t},e.each(a,function(t,i){if(2>t)c[i]="mouse"+i;else{var n="touch"+("down"===i?"start":"up"===i?"end":i);e.event.fixHooks[n]=h,c[i]=n+" mouse"+i}})}e.pointertouch=c;var l=t.document,f="__pz__",p=Array.prototype.slice,d=!!t.PointerEvent,m=function(){var t=l.createElement("input");return t.setAttribute("oninput","return"),"function"==typeof t.oninput}(),v=/([A-Z])/g,g=/^http:[\w\.\/]+svg$/,y=/^inline/,w="(\\-?[\\d\\.e]+)",T="\\,?\\s*",b=new RegExp("^matrix\\("+w+T+w+T+w+T+w+T+w+T+w+"\\)$");return s.prototype={x:function(t){var e=t instanceof o,i=this.elements,n=t.elements;return e&&3===n.length?new o(i[0]*n[0]+i[1]*n[1]+i[2]*n[2],i[3]*n[0]+i[4]*n[1]+i[5]*n[2],i[6]*n[0]+i[7]*n[1]+i[8]*n[2]):n.length===i.length?new s(i[0]*n[0]+i[1]*n[3]+i[2]*n[6],i[0]*n[1]+i[1]*n[4]+i[2]*n[7],i[0]*n[2]+i[1]*n[5]+i[2]*n[8],i[3]*n[0]+i[4]*n[3]+i[5]*n[6],i[3]*n[1]+i[4]*n[4]+i[5]*n[7],i[3]*n[2]+i[4]*n[5]+i[5]*n[8],i[6]*n[0]+i[7]*n[3]+i[8]*n[6],i[6]*n[1]+i[7]*n[4]+i[8]*n[7],i[6]*n[2]+i[7]*n[5]+i[8]*n[8]):!1},inverse:function(){var t=1/this.determinant(),e=this.elements;return new s(t*(e[8]*e[4]-e[7]*e[5]),t*-(e[8]*e[1]-e[7]*e[2]),t*(e[5]*e[1]-e[4]*e[2]),t*-(e[8]*e[3]-e[6]*e[5]),t*(e[8]*e[0]-e[6]*e[2]),t*-(e[5]*e[0]-e[3]*e[2]),t*(e[7]*e[3]-e[6]*e[4]),t*-(e[7]*e[0]-e[6]*e[1]),t*(e[4]*e[0]-e[3]*e[1]))},determinant:function(){var t=this.elements;return t[0]*(t[8]*t[4]-t[7]*t[5])-t[3]*(t[8]*t[1]-t[7]*t[2])+t[6]*(t[5]*t[1]-t[4]*t[2])}},o.prototype.e=s.prototype.e=function(t){return this.elements[t]},r.rmatrix=b,r.events=e.pointertouch,r.defaults={eventNamespace:".panzoom",transition:!0,cursor:"",disablePan:!1,disableZoom:!1,increment:.3,minScale:.4,maxScale:5,rangeStep:.05,duration:600,easing:"ease-in-out",contain:!1},r.prototype={constructor:r,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),e.removeData(this.elem,f)},resetDimensions:function(){var t=this.$parent;this.container={width:t.innerWidth(),height:t.innerHeight()};var i,n=t.offset(),s=this.elem,o=this.$elem;this.isSVG?(i=s.getBoundingClientRect(),i={left:i.left-n.left,top:i.top-n.top,width:i.width,height:i.height,margin:{left:0,top:0}}):i={left:e.css(s,"left",!0)||0,top:e.css(s,"top",!0)||0,width:o.innerWidth(),height:o.innerHeight(),margin:{top:e.css(s,"marginTop",!0)||0,left:e.css(s,"marginLeft",!0)||0}},i.widthBorder=e.css(s,"borderLeftWidth",!0)+e.css(s,"borderRightWidth",!0)||0,i.heightBorder=e.css(s,"borderTopWidth",!0)+e.css(s,"borderBottomWidth",!0)||0,this.dimensions=i},reset:function(t){t=n(t);var e=this.setMatrix(this._origTransform,t);t.silent||this._trigger("reset",e)},resetZoom:function(t){t=n(t);var e=this.getMatrix(this._origTransform);t.dValue=e[3],this.zoom(e[0],t)},resetPan:function(t){var e=this.getMatrix(this._origTransform);this.pan(e[4],e[5],n(t))},setTransform:function(t){for(var i=this.isSVG?"attr":"style",n=this.$set,s=n.length;s--;)e[i](n[s],"transform",t)},getTransform:function(t){var i=this.$set,n=i[0];return t?this.setTransform(t):t=e[this.isSVG?"attr":"style"](n,"transform"),"none"===t||b.test(t)||this.setTransform(t=e.css(n,"transform")),t||"none"},getMatrix:function(t){var e=b.exec(t||this.getTransform());return e&&e.shift(),e||[1,0,0,1,0,0]},setMatrix:function(t,i){if(!this.disabled){i||(i={}),"string"==typeof t&&(t=this.getMatrix(t));var n,s,o,r,a,h,c,u,l,f,p=+t[0],d=this.$parent,m="undefined"!=typeof i.contain?i.contain:this.options.contain;return m&&(n=this._checkDims(),s=this.container,l=n.width+n.widthBorder,f=n.height+n.heightBorder,o=(l*Math.abs(p)-s.width)/2,r=(f*Math.abs(p)-s.height)/2,c=n.left+n.margin.left,u=n.top+n.margin.top,"invert"===m?(a=l>s.width?l-s.width:0,h=f>s.height?f-s.height:0,o+=(s.width-l)/2,r+=(s.height-f)/2,t[4]=Math.max(Math.min(t[4],o-c),-o-c-a),t[5]=Math.max(Math.min(t[5],r-u),-r-u-h+n.heightBorder)):(r+=n.heightBorder/2,a=s.width>l?s.width-l:0,h=s.height>f?s.height-f:0,"center"===d.css("textAlign")&&y.test(e.css(this.elem,"display"))?a=0:o=r=0,t[4]=Math.min(Math.max(t[4],o-c),-o-c+a),t[5]=Math.min(Math.max(t[5],r-u),-r-u+h))),"skip"!==i.animate&&this.transition(!i.animate),i.range&&this.$zoomRange.val(p),this.setTransform("matrix("+t.join(",")+")"),i.silent||this._trigger("change",t),t}},isPanning:function(){return this.panning},transition:function(t){if(this._transition)for(var i=t||!this.options.transition?"none":this._transition,n=this.$set,s=n.length;s--;)e.style(n[s],"transition")!==i&&e.style(n[s],"transition",i)},pan:function(t,e,i){if(!this.options.disablePan){i||(i={});var n=i.matrix;n||(n=this.getMatrix()),i.relative&&(t+=+n[4],e+=+n[5]),n[4]=t,n[5]=e,this.setMatrix(n,i),i.silent||this._trigger("pan",n[4],n[5])}},zoom:function(t,i){"object"==typeof t?(i=t,t=null):i||(i={});var n=e.extend({},this.options,i);if(!n.disableZoom){var r=!1,a=n.matrix||this.getMatrix();"number"!=typeof t&&(t=+a[0]+n.increment*(t?-1:1),r=!0),t>n.maxScale?t=n.maxScale:t<n.minScale&&(t=n.minScale);var h=n.focal;if(h&&!n.disablePan){var c=this._checkDims(),u=h.clientX,l=h.clientY;this.isSVG||(u-=(c.width+c.widthBorder)/2,l-=(c.height+c.heightBorder)/2);var f=new o(u,l,1),p=new s(a),d=this.parentOffset||this.$parent.offset(),m=new s(1,0,d.left-this.$doc.scrollLeft(),0,1,d.top-this.$doc.scrollTop()),v=p.inverse().x(m.inverse().x(f)),g=t/a[0];p=p.x(new s([g,0,0,g,0,0])),f=m.x(p.x(v)),a[4]=+a[4]+(u-f.e(0)),a[5]=+a[5]+(l-f.e(1))}a[0]=t,a[3]="number"==typeof n.dValue?n.dValue:t,this.setMatrix(a,{animate:"boolean"==typeof n.animate?n.animate:r,range:!n.noSetRange}),n.silent||this._trigger("zoom",a[0],n)}},option:function(t,i){var n;if(!t)return e.extend({},this.options);if("string"==typeof t){if(1===arguments.length)return void 0!==this.options[t]?this.options[t]:null;n={},n[t]=i}else n=t;this._setOptions(n)},_setOptions:function(t){e.each(t,e.proxy(function(t,i){switch(t){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[t]=i,t){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[t]=i;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":e.style(this.elem,"cursor",i);break;case"minScale":this.$zoomRange.attr("min",i);break;case"maxScale":this.$zoomRange.attr("max",i);break;case"rangeStep":this.$zoomRange.attr("step",i);break;case"startTransform":this._buildTransform();
break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"$set":i instanceof e&&i.length&&(this.$set=i,this._initStyle(),this._buildTransform())}},this))},_initStyle:function(){var t={"backface-visibility":"hidden","transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(t.cursor=this.options.cursor),this.$set.css(t);var i=this.$parent;i.length&&!e.nodeName(i[0],"body")&&(t={overflow:"hidden"},"static"===i.css("position")&&(t.position="relative"),i.css(t))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var t=this,i=this.options,n=i.eventNamespace,s=d?"pointerdown"+n:"touchstart"+n+" mousedown"+n,o=d?"pointerup"+n:"touchend"+n+" click"+n,a={},h=this.$reset,c=this.$zoomRange;if(e.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var t=i["on"+this];e.isFunction(t)&&(a["panzoom"+this.toLowerCase()+n]=t)}),i.disablePan&&i.disableZoom||(a[s]=function(e){var n;("touchstart"===e.type?!(n=e.touches)||(1!==n.length||i.disablePan)&&2!==n.length:i.disablePan||1!==e.which)||(e.preventDefault(),e.stopPropagation(),t._startMove(e,n))}),this.$elem.on(a),h.length&&h.on(o,function(e){e.preventDefault(),t.reset()}),c.length&&c.attr({step:i.rangeStep===r.defaults.rangeStep&&c.attr("step")||i.rangeStep,min:i.minScale,max:i.maxScale}).prop({value:this.getMatrix()[0]}),!i.disableZoom){var u=this.$zoomIn,l=this.$zoomOut;u.length&&l.length&&(u.on(o,function(e){e.preventDefault(),t.zoom()}),l.on(o,function(e){e.preventDefault(),t.zoom(!0)})),c.length&&(a={},a[(d?"pointerdown":"mousedown")+n]=function(){t.transition(!0)},a[(m?"input":"change")+n]=function(){t.zoom(+this.value,{noSetRange:!0})},c.on(a))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var t=this.options;this._transition=this._transform+" "+t.duration+"ms "+t.easing}},_checkDims:function(){var t=this.dimensions;return t.width&&t.height||this.resetDimensions(),this.dimensions},_getDistance:function(t){var e=t[0],i=t[1];return Math.sqrt(Math.pow(Math.abs(i.clientX-e.clientX),2)+Math.pow(Math.abs(i.clientY-e.clientY),2))},_getMiddle:function(t){var e=t[0],i=t[1];return{clientX:(i.clientX-e.clientX)/2+e.clientX,clientY:(i.clientY-e.clientY)/2+e.clientY}},_trigger:function(t){"string"==typeof t&&(t="panzoom"+t),this.$elem.triggerHandler(t,[this].concat(p.call(arguments,1)))},_startMove:function(t,n){var s,o,r,a,h,c,u,f,p=this,m=this.options,v=m.eventNamespace,g=this.getMatrix(),y=g.slice(0),w=+y[4],T=+y[5],b={matrix:g,animate:"skip"};d?(o="pointermove",r="pointerup"):"touchstart"===t.type?(o="touchmove",r="touchend"):(o="mousemove",r="mouseup"),o+=v,r+=v,this.transition(!0),this.panning=!0,this._trigger("start",t,n),n&&2===n.length?(a=this._getDistance(n),h=+g[0],c=this._getMiddle(n),s=function(t){t.preventDefault();var e=p._getMiddle(n=t.touches),i=p._getDistance(n)-a;p.zoom(i*(m.increment/100)+h,{focal:e,matrix:g,animate:!1}),p.pan(+g[4]+e.clientX-c.clientX,+g[5]+e.clientY-c.clientY,b),c=e}):(u=t.pageX,f=t.pageY,s=function(t){t.preventDefault(),p.pan(w+t.pageX-u,T+t.pageY-f,b)}),e(l).off(v).on(o,s).on(r,function(t){t.preventDefault(),e(this).off(v),p.panning=!1,t.type="panzoomend",p._trigger(t,g,!i(g,y))})}},e.Panzoom=r,e.fn.panzoom=function(t){var i,n,s,o;return"string"==typeof t?(o=[],n=p.call(arguments,1),this.each(function(){i=e.data(this,f),i?"_"!==t.charAt(0)&&"function"==typeof(s=i[t])&&void 0!==(s=s.apply(i,n))&&o.push(s):o.push(void 0)}),o.length?1===o.length?o[0]:o:this):this.each(function(){new r(this,t)})},r}),function(t,e,i,n){"use strict";function s(t,e,i){return setTimeout(c(t,i),e)}function o(t,e,i){return Array.isArray(t)?(r(t,i[e],i),!0):!1}function r(t,e,i){var s;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(s=0;s<t.length;)e.call(i,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(i,t[s],s,t)}function a(e,i,n){var s="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=t.console&&(t.console.warn||t.console.log);return o&&o.call(t.console,s,n),e.apply(this,arguments)}}function h(t,e,i){var n,s=e.prototype;n=t.prototype=Object.create(s),n.constructor=t,n._super=s,i&&at(n,i)}function c(t,e){return function(){return t.apply(e,arguments)}}function u(t,e){return typeof t==ut?t.apply(e?e[0]||n:n,e):t}function l(t,e){return t===n?e:t}function f(t,e,i){r(v(e),function(e){t.addEventListener(e,i,!1)})}function p(t,e,i){r(v(e),function(e){t.removeEventListener(e,i,!1)})}function d(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function g(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function w(t,e,i){for(var n=[],s=[],o=0;o<t.length;){var r=e?t[o][e]:t[o];g(s,r)<0&&n.push(t[o]),s[o]=r,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function T(t,e){for(var i,s,o=e[0].toUpperCase()+e.slice(1),r=0;r<ht.length;){if(i=ht[r],s=i?i+o:e,s in t)return s;r++}return n}function b(){return vt++}function x(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}function _(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){u(t.options.enable,[t])&&i.handler(e)},this.init()}function M(t){var e,i=t.options.inputClass;return new(e=i?i:wt?R:Tt?N:yt?H:k)(t,E)}function E(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&Dt&&n-s===0,r=e&(St|It)&&n-s===0;i.isFirst=!!o,i.isFinal=!!r,o&&(t.session={}),i.eventType=e,D(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function D(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=I(e)),s>1&&!i.firstMultiple?i.firstMultiple=I(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,r=i.firstMultiple,a=r?r.center:o.center,h=e.center=C(n);e.timeStamp=pt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=F(a,h),e.distance=O(a,h),z(i,e),e.offsetDirection=A(e.deltaX,e.deltaY);var c=P(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=ft(c.x)>ft(c.y)?c.x:c.y,e.scale=r?$(r.pointers,n):1,e.rotation=r?Y(r.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,S(i,e);var u=t.element;d(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function z(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Dt&&o.eventType!==St||(s=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}function S(t,e){var i,s,o,r,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=It&&(h>Et||a.velocity===n)){var c=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,l=P(h,c,u);s=l.x,o=l.y,i=ft(l.x)>ft(l.y)?l.x:l.y,r=A(c,u),t.lastInterval=e}else i=a.velocity,s=a.velocityX,o=a.velocityY,r=a.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=r}function I(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:lt(t.pointers[i].clientX),clientY:lt(t.pointers[i].clientY)},i++;return{timeStamp:pt(),pointers:e,center:C(e),deltaX:t.deltaX,deltaY:t.deltaY}}function C(t){var e=t.length;if(1===e)return{x:lt(t[0].clientX),y:lt(t[0].clientY)};for(var i=0,n=0,s=0;e>s;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:lt(i/e),y:lt(n/e)}}function P(t,e,i){return{x:e/t||0,y:i/t||0}}function A(t,e){return t===e?Ct:ft(t)>=ft(e)?0>t?Pt:At:0>e?Ot:Ft}function O(t,e,i){i||(i=Rt);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function F(t,e,i){i||(i=Rt);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}function Y(t,e){return F(e[1],e[0],Xt)+F(t[1],t[0],Xt)}function $(t,e){return O(e[0],e[1],Xt)/O(t[0],t[1],Xt)}function k(){this.evEl=Nt,this.evWin=Zt,this.allow=!0,this.pressed=!1,_.apply(this,arguments)}function R(){this.evEl=Wt,this.evWin=Vt,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function X(){this.evTarget=Bt,this.evWin=Ut,this.started=!1,_.apply(this,arguments)}function L(t,e){var i=y(t.touches),n=y(t.changedTouches);return e&(St|It)&&(i=w(i.concat(n),"identifier",!0)),[i,n]}function N(){this.evTarget=Gt,this.targetIds={},_.apply(this,arguments)}function Z(t,e){var i=y(t.touches),n=this.targetIds;if(e&(Dt|zt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,o,r=y(t.changedTouches),a=[],h=this.target;if(o=i.filter(function(t){return d(t.target,h)}),e===Dt)for(s=0;s<o.length;)n[o[s].identifier]=!0,s++;for(s=0;s<r.length;)n[r[s].identifier]&&a.push(r[s]),e&(St|It)&&delete n[r[s].identifier],s++;return a.length?[w(o.concat(a),"identifier",!0),a]:void 0}function H(){_.apply(this,arguments);var t=c(this.handler,this);this.touch=new N(this.manager,t),this.mouse=new k(this.manager,t)}function q(t,e){this.manager=t,this.set(e)}function W(t){if(m(t,ne))return ne;var e=m(t,se),i=m(t,oe);return e&&i?ne:e||i?e?se:oe:m(t,ie)?ie:ee}function V(t){this.options=at({},this.defaults,t||{}),this.id=b(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=re,this.simultaneous={},this.requireFail=[]}function j(t){return t&le?"cancel":t&ce?"end":t&he?"move":t&ae?"start":""}function B(t){return t==Ft?"down":t==Ot?"up":t==Pt?"left":t==At?"right":""}function U(t,e){var i=e.manager;return i?i.get(t):t}function Q(){V.apply(this,arguments)}function G(){Q.apply(this,arguments),this.pX=null,this.pY=null}function K(){Q.apply(this,arguments)}function J(){V.apply(this,arguments),this._timer=null,this._input=null}function tt(){Q.apply(this,arguments)}function et(){Q.apply(this,arguments)}function it(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function nt(t,e){return e=e||{},e.recognizers=l(e.recognizers,nt.defaults.preset),new st(t,e)}function st(t,e){this.options=at({},nt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=M(this),this.touchAction=new q(this,this.options.touchAction),ot(this,!0),r(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ot(t,e){var i=t.element;i.style&&r(t.options.cssProps,function(t,n){i.style[T(i.style,n)]=e?t:""})}function rt(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var at,ht=["","webkit","Moz","MS","ms","o"],ct=e.createElement("div"),ut="function",lt=Math.round,ft=Math.abs,pt=Date.now;at="function"!=typeof Object.assign?function(t){if(t===n||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(s!==n&&null!==s)for(var o in s)s.hasOwnProperty(o)&&(e[o]=s[o])}return e}:Object.assign;var dt=a(function(t,e,i){for(var s=Object.keys(e),o=0;o<s.length;)(!i||i&&t[s[o]]===n)&&(t[s[o]]=e[s[o]]),o++;return t},"extend","Use `assign`."),mt=a(function(t,e){return dt(t,e,!0)},"merge","Use `assign`."),vt=1,gt=/mobile|tablet|ip(ad|hone|od)|android/i,yt="ontouchstart"in t,wt=T(t,"PointerEvent")!==n,Tt=yt&&gt.test(navigator.userAgent),bt="touch",xt="pen",_t="mouse",Mt="kinect",Et=25,Dt=1,zt=2,St=4,It=8,Ct=1,Pt=2,At=4,Ot=8,Ft=16,Yt=Pt|At,$t=Ot|Ft,kt=Yt|$t,Rt=["x","y"],Xt=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(x(this.element),this.evWin,this.domHandler)}};var Lt={mousedown:Dt,mousemove:zt,mouseup:St},Nt="mousedown",Zt="mousemove mouseup";h(k,_,{handler:function(t){var e=Lt[t.type];e&Dt&&0===t.button&&(this.pressed=!0),e&zt&&1!==t.which&&(e=St),this.pressed&&this.allow&&(e&St&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:_t,srcEvent:t}))}});var Ht={pointerdown:Dt,pointermove:zt,pointerup:St,pointercancel:It,pointerout:It},qt={2:bt,3:xt,4:_t,5:Mt},Wt="pointerdown",Vt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Wt="MSPointerDown",Vt="MSPointerMove MSPointerUp MSPointerCancel"),h(R,_,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=Ht[n],o=qt[t.pointerType]||t.pointerType,r=o==bt,a=g(e,t.pointerId,"pointerId");s&Dt&&(0===t.button||r)?0>a&&(e.push(t),a=e.length-1):s&(St|It)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var jt={touchstart:Dt,touchmove:zt,touchend:St,touchcancel:It},Bt="touchstart",Ut="touchstart touchmove touchend touchcancel";h(X,_,{handler:function(t){var e=jt[t.type];if(e===Dt&&(this.started=!0),this.started){var i=L.call(this,t,e);e&(St|It)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:bt,srcEvent:t})}}});var Qt={touchstart:Dt,touchmove:zt,touchend:St,touchcancel:It},Gt="touchstart touchmove touchend touchcancel";h(N,_,{handler:function(t){var e=Qt[t.type],i=Z.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:bt,srcEvent:t})}}),h(H,_,{handler:function(t,e,i){var n=i.pointerType==bt,s=i.pointerType==_t;if(n)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;e&(St|It)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Kt=T(ct.style,"touchAction"),Jt=Kt!==n,te="compute",ee="auto",ie="manipulation",ne="none",se="pan-x",oe="pan-y";q.prototype={set:function(t){t==te&&(t=this.compute()),Jt&&this.manager.element.style&&(this.manager.element.style[Kt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return r(this.manager.recognizers,function(e){u(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),W(t.join(" "))},preventDefaults:function(t){if(!Jt){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,s=m(n,ne),o=m(n,oe),r=m(n,se);if(s){var a=1===t.pointers.length,h=t.distance<2,c=t.deltaTime<250;if(a&&h&&c)return}if(!r||!o)return s||o&&i&Yt||r&&i&$t?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var re=1,ae=2,he=4,ce=8,ue=ce,le=16,fe=32;V.prototype={defaults:{},set:function(t){return at(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=U(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=U(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=U(t,this),-1===g(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=U(t,this);var e=g(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;ce>n&&e(i.options.event+j(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=ce&&e(i.options.event+j(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=fe)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(fe|re)))return!1;t++}return!0},recognize:function(t){var e=at({},t);return u(this.options.enable,[this,e])?(this.state&(ue|le|fe)&&(this.state=re),this.state=this.process(e),void(this.state&(ae|he|ce|le)&&this.tryEmit(e))):(this.reset(),void(this.state=fe))},process:function(){},getTouchAction:function(){},reset:function(){}},h(Q,V,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(ae|he),s=this.attrTest(t);return n&&(i&It||!s)?e|le:n||s?i&St?e|ce:e&ae?e|he:ae:fe}}),h(G,Q,{defaults:{event:"pan",threshold:10,pointers:1,direction:kt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Yt&&e.push(oe),t&$t&&e.push(se),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,o=t.deltaX,r=t.deltaY;return s&e.direction||(e.direction&Yt?(s=0===o?Ct:0>o?Pt:At,i=o!=this.pX,n=Math.abs(t.deltaX)):(s=0===r?Ct:0>r?Ot:Ft,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return Q.prototype.attrTest.call(this,t)&&(this.state&ae||!(this.state&ae)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=B(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),h(K,Q,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ne]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ae)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),h(J,V,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ee]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(St|It)&&!o)this.reset();else if(t.eventType&Dt)this.reset(),this._timer=s(function(){this.state=ue,this.tryEmit()},e.time,this);else if(t.eventType&St)return ue;return fe},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ue&&(t&&t.eventType&St?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=pt(),this.manager.emit(this.options.event,this._input)))}}),h(tt,Q,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ne]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ae)}}),h(et,Q,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Yt|$t,pointers:1},getTouchAction:function(){return G.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Yt|$t)?e=t.overallVelocity:i&Yt?e=t.overallVelocityX:i&$t&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&ft(e)>this.options.velocity&&t.eventType&St},emit:function(t){var e=B(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(it,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ie]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Dt&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=St)return this.failTimeout();var r=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||O(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t;var h=this.count%e.taps;if(0===h)return this.hasRequireFailures()?(this._timer=s(function(){this.state=ue,this.tryEmit()},e.interval,this),ae):ue}return fe},failTimeout:function(){return this._timer=s(function(){this.state=fe},this.options.interval,this),fe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ue&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),nt.VERSION="2.0.6",nt.defaults={domEvents:!1,touchAction:te,enable:!0,inputTarget:null,inputClass:null,preset:[[tt,{enable:!1}],[K,{enable:!1},["rotate"]],[et,{direction:Yt}],[G,{direction:Yt},["swipe"]],[it],[it,{event:"doubletap",taps:2},["tap"]],[J]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var pe=1,de=2;st.prototype={set:function(t){return at(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?de:pe},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&ue)&&(s=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],e.stopped===de||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&i.state&(ae|he|ce)&&(s=e.curRecognizer=i),o++}},get:function(t){if(t instanceof V)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=g(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){var i=this.handlers;return r(v(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return r(v(t),function(t){e?i[t]&&i[t].splice(g(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&rt(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},at(nt,{INPUT_START:Dt,INPUT_MOVE:zt,INPUT_END:St,INPUT_CANCEL:It,STATE_POSSIBLE:re,STATE_BEGAN:ae,STATE_CHANGED:he,STATE_ENDED:ce,STATE_RECOGNIZED:ue,STATE_CANCELLED:le,STATE_FAILED:fe,DIRECTION_NONE:Ct,DIRECTION_LEFT:Pt,DIRECTION_RIGHT:At,DIRECTION_UP:Ot,DIRECTION_DOWN:Ft,DIRECTION_HORIZONTAL:Yt,DIRECTION_VERTICAL:$t,DIRECTION_ALL:kt,Manager:st,Input:_,TouchAction:q,TouchInput:N,MouseInput:k,PointerEventInput:R,TouchMouseInput:H,SingleTouchInput:X,Recognizer:V,AttrRecognizer:Q,Tap:it,Pan:G,Swipe:et,Pinch:K,Rotate:tt,Press:J,on:f,off:p,each:r,merge:mt,extend:dt,assign:at,inherit:h,bindFn:c,prefixed:T});var me="undefined"!=typeof t?t:"undefined"!=typeof self?self:{};me.Hammer=nt,"function"==typeof define&&define.amd?define(function(){return nt}):"undefined"!=typeof module&&module.exports?module.exports=nt:t[i]=nt}(window,document,"Hammer");